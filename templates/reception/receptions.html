{% extends "base.html" %}
{% block title %}Recepciones{% endblock %}
{% block content %}
<h2>Listado de Recepciones</h2>

<form class="mb-3" method="GET">
    <input type="text" name="buscar" class="form-control" placeholder="Buscar por nombre o tipo de uva...">
</form>

<a href="{{ url_for('grape_reception.show_add_form') }}" class="btn btn-success mb-3">Agregar Recepción</a>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Tipo de Uva</th>
            <th>Cantidad</th>
            <th>Peso</th>
            <th>Fecha</th>
            <th>Variedad</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
    {% for r in receptions %}
        <tr>
            <td>{{ r.name }}</td>
            <td>{{ r.grape_type }}</td>
            <td>{{ r.quantity }}</td>
            <td>{{ r.weight }} kg</td>
            <td>{{ r.reception_date }}</td>
            <td>{{ r.variety.name }}</td>
            <td>
                <a href="{{ url_for('grape_reception.edit_reception_form', reception_id=r.id) }}" class="btn btn-sm btn-warning">Editar</a>
                <form method="POST" action="{{ url_for('grape_reception.delete_reception', reception_id=r.id) }}" style="display:inline-block;">
                    <button class="btn btn-sm btn-danger" onclick="return confirm('¿Eliminar esta recepción?')">Eliminar</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
